<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

	<resultMap id="userMap" type="example.entity.User">
	</resultMap>

	<!-- auto generate default query -->
	<select id="findUser"
		parameterType="java.util.Map"
		resultMap="userMap">
		SELECT 
				TD.id ,
				TD.userName,
				TD.userPassword,
				TD.phone,
				TD.createDate ,
				TD.updateDate
		  FROM book_users  as TD
		<trim prefix="WHERE" prefixOverrides="AND | OR">
			1 = 1
			<if test="id!=null and id !=''">
				and id = #{id}
			</if>
			<if test="userName!=null and userName !=''">
				and userName = #{userName}
			</if>
		</trim>


	</select>

	<select id="selectAllUser" resultType="example.entity.User">
		select * from book_users
	</select>

	<select id="selectAllUserList" resultType="example.entity.User">
		select * from book_users limit #{pageNo} ,#{pageNum}
	</select>

	<select id="count" resultType="int">
		select count(*) as count from book_users
		<where>
			<if test="userName != null">
				userName like "%"#{userName}"%"
			</if>
		</where>
	</select>


	<select id="queryUser" resultType="example.entity.User">
		select * from book_users
		<where>
			 <if test="userName != null">
				userName like "%"#{userName}"%"
			 </if>
		</where>
	</select>

<!--	根据用户名称查询出所有的用户，并且分页-->
	<select id="queryAllUser" resultType="example.entity.User">
		select * from book_users
		<where>
			<if test="userName != null">
				userName like "%"#{userName}"%"
			</if>
		</where>
		limit #{pageNo} ,#{pageNum}
	</select>


	<insert id="addUser">
		INSERT INTO book_users ( userName, userPassword, phone, createDate)
		values (#{userName}, #{userPassword}, #{phone}, #{createDate})
	</insert>

	<select id="findUserByName2" resultType="example.entity.User">
		select * from book_users where userName = #{userName}
	</select>

	
		<!-- auto generate default count -->



</mapper>
<!--
sqlMap生成描述:

-->